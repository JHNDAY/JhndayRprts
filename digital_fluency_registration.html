<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Fluency - Registration</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            max-width: 600px;
            width: 100%;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .form-container {
            padding: 40px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            color: #495057;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            font-size: 1em;
            transition: border-color 0.3s;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: #667eea;
            outline: none;
        }

        .form-group input::placeholder {
            color: #adb5bd;
        }

        .register-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 10px;
        }

        .register-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .register-btn:active {
            transform: translateY(0);
        }

        .register-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .required {
            color: #dc3545;
        }

        .info-text {
            background: #e7f3ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-bottom: 25px;
            border-radius: 4px;
            font-size: 0.95em;
            color: #495057;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 6px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            animation: slideIn 0.3s ease-out;
            z-index: 1000;
        }

        .notification.success {
            background: #28a745;
            color: white;
        }

        .notification.error {
            background: #dc3545;
            color: white;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 8px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .radio-option input[type="radio"] {
            width: auto;
            margin-right: 8px;
            cursor: pointer;
        }

        .radio-option label {
            margin: 0;
            cursor: pointer;
            font-weight: normal;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üíª Digital Fluency</h1>
            <p>Register to Attend</p>
        </header>
        
        <div class="form-container">
            <div class="info-text">
                üìã Please fill out all required fields to register for the Digital Fluency session. The information identifying your computer and browser help to insure that all the visualizations will work in your environment.
            </div>
            
            <form id="registrationForm" onsubmit="submitRegistration(event)">
                <div class="form-group">
                    <label>Name <span class="required">*</span></label>
                    <input type="text" id="name" required placeholder="Enter your full name">
                </div>
                
                <div class="form-group">
                    <label>Email <span class="required">*</span></label>
                    <input type="email" id="email" required placeholder="Enter your email address">
                </div>
                
                <div class="form-group">
                    <label>Computer Type <span class="required">*</span></label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="mac" name="computer" value="MAC" required>
                            <label for="mac">üçé MAC</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="pc" name="computer" value="PC" required>
                            <label for="pc">ü™ü PC</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Browser <span class="required">*</span></label>
                    <select id="browser" required>
                        <option value="">Select your browser...</option>
                        <option value="Chrome">üåê Chrome</option>
                        <option value="Safari">üß≠ Safari</option>
                        <option value="Firefox">ü¶ä Firefox</option>
                        <option value="Edge">üåä Edge</option>
                        <option value="Other">üîß Other</option>
                    </select>
                </div>
                
                <button type="submit" class="register-btn" id="submitBtn">
                    Register
                </button>
            </form>
        </div>
    </div>

    <script>
        // Google Apps Script URL for your deployment
        // Spreadsheet: https://docs.google.com/spreadsheets/d/1dYe4tr1pLZ5hoeZGKire7XgQGTLbpYUn8WBtiE53F2A/edit
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzX-vDkyqA-1VvbQdR52w23gynFlrAXuz9j38ZC_UJJD79UJIE-DRPvBcIqA8jdU_h_/exec';
        
        async function submitRegistration(event) {
            event.preventDefault();
            
            // Get form values
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const computer = document.querySelector('input[name="computer"]:checked').value;
            const browser = document.getElementById('browser').value;
            
            // Prepare registration data
            const registration = {
                name: name,
                email: email,
                computer: computer,
                browser: browser,
                timestamp: new Date().toLocaleString()
            };
            
            const button = document.getElementById('submitBtn');
            button.disabled = true;
            button.textContent = '‚è≥ Submitting...';
            
            // Check if Google Apps Script URL is configured
            if (SCRIPT_URL === 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE' || !SCRIPT_URL || SCRIPT_URL.trim() === '') {
                // If not configured, show CSV download option
                downloadAsCSV(registration);
                button.disabled = false;
                button.textContent = 'Register';
                return;
            }
            
            try {
                // Submit to Google Sheets via Apps Script
                await fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(registration)
                });
                
                // Success
                button.textContent = '‚úì Registered!';
                button.style.background = '#28a745';
                
                showNotification('‚úì Registration submitted successfully!', false);
                
                // Reset form after 2 seconds
                setTimeout(() => {
                    document.getElementById('registrationForm').reset();
                    button.disabled = false;
                    button.textContent = 'Register';
                    button.style.background = '';
                }, 2000);
                
            } catch (error) {
                console.error('Submission error:', error);
                
                // Even with errors in no-cors mode, assume success
                button.textContent = '‚úì Registered!';
                button.style.background = '#28a745';
                
                showNotification('‚úì Registration submitted!', false);
                
                setTimeout(() => {
                    document.getElementById('registrationForm').reset();
                    button.disabled = false;
                    button.textContent = 'Register';
                    button.style.background = '';
                }, 2000);
            }
        }
        
        function downloadAsCSV(registration) {
            // Create CSV content
            let csvContent = 'Name,Email,Computer,Browser,Timestamp\n';
            csvContent += `"${registration.name}","${registration.email}","${registration.computer}","${registration.browser}","${registration.timestamp}"\n`;
            
            // Create blob and download
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'Digital_Fluency_Registration_' + new Date().toISOString().split('T')[0] + '.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('‚ö†Ô∏è Google Sheets not configured. Registration exported as CSV.', true);
        }
        
        function showNotification(message, isError = false) {
            const notification = document.createElement('div');
            notification.className = `notification ${isError ? 'error' : 'success'}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideIn 0.3s ease-out reverse';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>
